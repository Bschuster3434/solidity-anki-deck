
# Run below tasks in reverse? Can also be set to true with "--reversed"
# If true it runs the opposite tasks in reverse order
# E.g: [csv_collection_to_deck_parts, deck_parts_to_crowdanki]
#      becomes
#      [crowdanki_to_deck_parts, deck_parts_to_csv_collection]
reverse: no

# Build tasks to run
tasks:
  # Convert a collection of csvs into Deck Parts
  - csv_collection_to_deck_parts:
      notes: words_with_derivatives.json

      # List of Note Models
      # How each Note Model used is built up from the csv data
      note_model_mappings:
        - note_model: LL Word
          csv_columns_to_fields:  # Map of csv column to note model field
            guid: guid
            tags: tags

            english: English
            danish: Word
            danish audio: Pronunciation (Recording and/or IPA)
            picture: Picture
        - note_model: LL Verb
          csv_columns_to_fields:
            guid: guid
            tags: tags

            english: English
            danish: Word
            danish audio: Pronunciation (Recording and/or IPA)

            present: Form Present
            past: Form Past
            present perfect: Form Perfect Present
            picture: Picture
        - note_model: LL Noun
          csv_columns_to_fields:
            guid: guid
            tags: tags

            english: English
            danish: Word
            danish audio: Pronunciation (Recording and/or IPA)
            picture: Picture

            plural: Plural
            indefinite plural: Indefinite Plural
            definite plural: Definite Plural

      # List of csvs to use
      csv_file_mappings:
        - csv: csvs/words.csv
          note_model: LL Word
          sort_by_columns: [english]  # Optional
          reverse_sort: no  # Optional

          # Further list of csvs which are 'Derivatives' of the above main csv above
          # Their data will be matched the the main csv based on the matching columns in both
          # Data from each column in a derivative that is not present in the main will be added to main
          derivatives:  # Optional
            - csv: csvs/derivatives/verbs.csv
              note_model: LL Verb  # Optionally change the Note Model on match
            - csv: csvs/derivatives/nouns.csv
              note_model: LL Noun

  # Convert Deck Parts into a CrowdAnki Export
  - deck_parts_to_crowdanki:
      # Looks in the global config deck part locations for the following files
      headers: default.json
      notes: words_with_derivatives.json

      # CrowdAnki Export config
      file: crowdanki_exports/General-With-Derivatives/  # CrowdAnkiExport folder
      note_sort_order: [note_model_name, guid]
      media: yes
      useless_note_keys: # Useless parts of a CrowdAnkiExport
        __type__: Note
        data:
        flags: 0
